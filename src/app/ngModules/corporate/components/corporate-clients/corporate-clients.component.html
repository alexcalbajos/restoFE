<div class="container shadow">
    <div class="title-row"
        fxLayout="row wrap"
        fxLayoutAlign="space-between center">
        <h3>{{ 'MANAGE_CLIENTS' | translate }}</h3>
        <button (click)="addClient()"
            ngClass.lt-sm="thin">{{ '+' | translate }} {{ 'ADD_CORP_CLIENT' | translate }}</button>
    </div>
    <div class="input-with-icons">
        <input class="autocomplete"
            (keyup)="applyFilter($event.target.value)">
        <div class="icon-container">
            <div class="svg-container icon large"
                [inlineSVG]="'/assets/svg/search.svg'"></div>
        </div>
    </div>
    <div *ngIf="pages.length > 1"
        fxLayout="row wrap"
        fxLayoutAlign="end center"
        fxLayoutGap="3px"
        class="pages-row">
        <button *ngFor="let page of pages; let index = index"
            (click)="getClients(index + 1)"
            class="short thin"
            [ngClass]="{'accent-color' : activePage === index + 1}">{{ index + 1 }}</button>
    </div>
    <div class="actions-row"
        fxLayout="row wrap"
        fxLayoutGap="5px">
        <button class="accent-color"
            ngClass.lt-sm="thin"
            [disabled]="!selectedClient"
            (click)="editClient()">{{ 'EDIT_CLIENT' | translate }}</button>
        <button class="accent-color"
            ngClass.lt-sm="thin"
            [disabled]="!selectedClient"
            (click)="deleteClient()">{{ 'DELETE_CLIENT' | translate }}</button>
        <button class="accent-color"
            ngClass.lt-sm="thin"
            [disabled]="!selectedClient"
            (click)="changePassword()">{{ 'RESET_PASSWORD' | translate }}</button>
    </div>
    <div *ngIf="!dataLoaded"
        class="spinner-container"
        fxLayout="column"
        fxLayoutAlign="center center">
        <mat-spinner diameter="30"></mat-spinner>
    </div>
    <div class="table-container">
        <table [ngClass]="{'invis': !dataLoaded}"
            mat-table
            [dataSource]="clients"
            matSort>
            <ng-container matColumnDef="select"
                sticky>
                <th mat-header-cell
                    *matHeaderCellDef
                    class="fixed-width">
                </th>
                <td mat-cell
                    *matCellDef="let client">
                    <mat-radio-group [(ngModel)]="selectedClient">
                        <mat-radio-button [value]="client">
                        </mat-radio-button>
                    </mat-radio-group>
                </td>
            </ng-container>
            <ng-container matColumnDef="last_name">
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'LNAME' | translate }}</th>
                <td mat-cell
                    *matCellDef="let client">{{ client.last_name }}</td>
            </ng-container>
            <ng-container matColumnDef="first_name"
                sticky>
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'FNAME' | translate }}</th>
                <td mat-cell
                    *matCellDef="let client">{{ client.first_name }}</td>
            </ng-container>
            <ng-container matColumnDef="email">
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'ENTER_EMAIL_ADDRESS' | translate }}</th>
                <td mat-cell
                    *matCellDef="let client">{{ client.email }}</td>
            </ng-container>
            <ng-container matColumnDef="phone">
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'PHONE' | translate }}</th>
                <td mat-cell
                    *matCellDef="let client">{{ client.phone }}</td>
            </ng-container>
            <ng-container matColumnDef="account_expiration_date">
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'ENTER_EXPIRATION_DATE' | translate }}</th>
                <td mat-cell
                    *matCellDef="let client">{{ client.account_expiration_date | date:'dd/MM/yy' }}</td>
            </ng-container>
            <tr mat-header-row
                *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row
                *matRowDef="let client; columns: displayedColumns;"
                class="selectable"
                [ngClass]="{'selected': selectedClient && selectedClient.id === client.id}"
                (click)="selectedClient = client"></tr>
        </table>
    </div>
</div>

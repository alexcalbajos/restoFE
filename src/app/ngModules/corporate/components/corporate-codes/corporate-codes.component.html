<div class="container shadow">
    <div class="title-row"
        fxLayout="row wrap"
        fxLayoutAlign="space-between center">
        <h3 class="uppercase">{{ 'CORP_CODES' | translate }}</h3>
        <div fxLayout="row wrap"
            fxLayoutGap="10px">
            <button (click)="uploadCodes()"
                ngClass.lt-sm="thin">{{ 'UPLOAD_CODES' | translate }}</button>
            <button (click)="addCode()"
                ngClass.lt-sm="thin">+ {{ 'NEW_CODE_TITLE' | translate }}</button>
        </div>
    </div>
    <div class="input-with-icons">
        <input class="autocomplete"
            (keyup)="applyFilter($event.target.value)">
        <div class="icon-container">
            <div class="svg-container icon large"
                [inlineSVG]="'/assets/svg/search.svg'"></div>
        </div>
    </div>
    <div *ngIf="pages.length > 1"
        fxLayout="row wrap"
        fxLayoutAlign="end center"
        fxLayoutGap="3px"
        class="pages-row">
        <button *ngFor="let page of pages; let index = index"
            (click)="getCodes(index + 1)"
            class="short thin"
            [ngClass]="{'accent-color' : activePage === index + 1}">{{ index + 1 }}</button>
    </div>
    <div *ngIf="!dataLoaded"
        class="spinner-container"
        fxLayout="column"
        fxLayoutAlign="center center">
        <mat-spinner diameter="30"></mat-spinner>
    </div>
    <div class="table-container">
        <table [ngClass]="{'invis': !dataLoaded}"
            mat-table
            [dataSource]="codes"
            matSort>
            <ng-container matColumnDef="code"
                sticky>
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'CORP_CODES_PH' | translate }}</th>
                <td mat-cell
                    *matCellDef="let code">{{ code.code }}</td>
            </ng-container>
            <ng-container matColumnDef="expiration_date">
                <th mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header>{{ 'ENTER_EXPIRATION_DATE' | translate }}</th>
                <td mat-cell
                    *matCellDef="let code">{{ code.expiration_date | date:'dd/MM/yy' }}</td>
            </ng-container>
            <ng-container matColumnDef="actions">
                <th mat-header-cell
                    *matHeaderCellDef
                    class="fixed-width">{{ 'ACTIONS' | translate }}</th>
                <td mat-cell
                    *matCellDef="let code"
                    fxLayout="row"
                    fxLayoutGap="5px"
                    fxLayoutAlign="space-between center">
                    <button class="accent-color"
                        (click)="editCode(code)">{{ 'EDIT' | translate }}</button>
                    <button class="accent-color"
                        (click)="deleteCode(code)">{{ 'DELETE' | translate }}</button>
                </td>
            </ng-container>
            <tr mat-header-row
                *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row
                *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>
